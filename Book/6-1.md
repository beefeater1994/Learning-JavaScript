# 1. 作用域是什么


作用域是根据名称查找变量的一套规则。
对于 `var a = 2;` 这样的变量的赋值操作会执行两个操作：
首先编译器会在当前作用域中声明一个变量（如果之前没有声明过），
然后再在运行时引擎会在作用域中查找该变量，如果能够找到就会对其赋值。

LHS 查询是试图找到变量容器的本身；RHS可理解为：retrieve his source value(取到它的源值)。
即赋值操作的目标是谁（LHS），谁是赋值操作的源头（RHS）。

如果 RHS 查询在所有嵌套的作用域中遍寻不到所需的变量，引擎就会抛出 ReferenceError 异常。
如果 RHS 查询找到了一个变量，但尝试对此变量进行不合理的操作，引擎会抛出 TypeError 异常。

总结：作用域是一套规则，用来确定在何处以及如何查找变量（标识符）。
如果查找的目的是对变量进行赋值，则会使用 LHS 查询。若目的是获取变量的值，就会使用 RHS 查询。
赋值操作会导致 LHS 查询。 = 操作符或调用函数时传入参数的操作都会导致关联作用域的赋值操作。

LHS 和 RHS 查询都会在当前执行作用域中开始，如果有需要（亦即它们没有找到所需的标识符），就会向上一级作用域继续查找目标标识符，这样每次上升亦即作用域，最后抵达全局作用域，无论找到或没找到都将停止。

不成功的 RHS 引用会导致抛出 ReferenceError 异常。不成功的 LHS 引用会导致自动隐式地创建一个全局变量（非严格模式下），该变量使用LHS 引用的目标作为标识符，或者抛出 ReferenceError 异常（严格模式下）。
